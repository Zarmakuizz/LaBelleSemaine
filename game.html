<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>jQuery UI Droppable - Revert draggable position</title>
<link rel="stylesheet" href="jquery_ui/themes/base/jquery.ui.all.css">
<script src="jquery_ui/jquery-1.9.1.js"></script>
<script src="jquery_ui/ui/jquery.ui.core.js"></script>
<script src="jquery_ui/ui/jquery.ui.widget.js"></script>
<script src="jquery_ui/ui/jquery.ui.mouse.js"></script>
<script src="jquery_ui/ui/jquery.ui.draggable.js"></script>
<script src="jquery_ui/ui/jquery.ui.droppable.js"></script>
<link rel="stylesheet" href="jquery_ui/demos/demos.css">
<link rel="stylesheet" href="css/style.css">
<script>

$(function() {
    var days = ["monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday"];

    function randomize(divName)
    {
        var $container = $("#"+divName);

        $container.html(shuffle($container.children().get()));

        function shuffle(o){
        for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
        return o;
        };
    }

    function reset() {
        window.location.reload();
    }

    //randomize("unsorted_days");


    var correct_days = 0;

    function drop_check(event, ui) {
        var dropId = $(this).attr("id");
        var dragId = ui.draggable.attr("id");
        dragElement = ui.draggable; 

        // Detach from original div, and attach to dropped one so that it can
        // be centered in css
        $(ui.draggable).detach().css({top: 0,left: 0}).appendTo(this);

        dragElement.draggable('disable');

        if(++correct_days == 7) {
            alert("C'est gagn√©");
            correct_days = 0;
            reset();
        };
    };
    
    for(var i=0; i<days.length; i++) {
       // Set revert property when day is dropped in the wrong place
       $( "#drag_"+days[i] ).draggable({ revert: "invalid" });
    
        // Play sound when days are clicked
        $("#unsorted_days").on( "click", "#drag_"+days[i], function() {
                var day = this.id.replace("drag_", "");
                document.getElementById("audio_"+day).play();
                });
    
        $("#drop_"+days[i]).droppable({
            accept:"#drag_"+days[i],
            activeClass: "ui-state-hover",
            hoverClass: "ui-state-active",
            drop: drop_check
            });
    
    }
});
</script>
</head>
<body>

<div id="game">
<div id="unsorted_days">
    <div id="drag_monday" class="cloudbox ui-widget-content">
    Lundi
    <audio id="audio_monday" preload>
      <source src="sound/01-Lundi.ogg" type="audio/ogg">
      <source src="sound/01-Lundi.mp3" type="audio/mpeg">
      Your browser does not support the audio tag.
    </audio>
    </div>

    <div id="drag_tuesday" class="cloudbox ui-widget-content">
    Mardi
    <audio id="audio_tuesday" preload>
      <source src="sound/02-Mardi.ogg" type="audio/ogg">
      <source src="sound/02-Mardi.mp3" type="audio/mpeg">
      Your browser does not support the audio tag.
    </audio>
    </div>

    <div id="drag_wednesday" class="cloudbox ui-widget-content">
    Mercredi
    <audio id="audio_wednesday" preload>
      <source src="sound/03-Mercredi.ogg" type="audio/ogg">
      <source src="sound/03-Mercredi.mp3" type="audio/mpeg">
      Your browser does not support the audio tag.
    </audio>
    </div>

    <div id="drag_thursday" class="cloudbox ui-widget-content">
    Jeudi
    <audio id="audio_thursday" preload>
      <source src="sound/04-Jeudi.ogg" type="audio/ogg">
      <source src="sound/04-Jeudi.mp3" type="audio/mpeg">
      Your browser does not support the audio tag.
    </audio>
    </div>

    <div id="drag_friday" class="cloudbox ui-widget-content">
    Vendredi
    <audio id="audio_friday" preload>
      <source src="sound/05-Vendredi.ogg" type="audio/ogg">
      <source src="sound/05-Vendredi.mp3" type="audio/mpeg">
      Your browser does not support the audio tag.
    </audio>
    </div>

    <div id="drag_saturday" class="cloudbox ui-widget-content">
    Samedi
    <audio id="audio_saturday" preload>
      <source src="sound/06-Samedi.ogg" type="audio/ogg">
      <source src="sound/06-Samedi.mp3" type="audio/mpeg">
      Your browser does not support the audio tag.
    </audio>
    </div>

    <div id="drag_sunday" class="cloudbox ui-widget-content">
    Dimanche
    <audio id="audio_sunday" preload>
      <source src="sound/07-Dimanche.ogg" type="audio/ogg">
      <source src="sound/07-Dimanche.mp3" type="audio/mpeg">
      Your browser does not support the audio tag.
    </audio>
    </div>
</div>

<div id="sorted_days">
    <div class="line"></div>
    <div id="drop_monday" class="timelinebox ui-widget-header">
    <p> </p>
    </div>

    <div id="drop_tuesday" class="timelinebox ui-widget-header">
    <p> </p>
    </div>

    <div id="drop_wednesday" class="timelinebox ui-widget-header">
    <p> </p>
    </div>

    <div id="drop_thursday" class="timelinebox ui-widget-header">
    <p> </p>
    </div>

    <div id="drop_friday" class="timelinebox ui-widget-header">
    <p> </p>
    </div>

    <div id="drop_saturday" class="timelinebox ui-widget-header">
    <p> </p>
    </div>

    <div id="drop_sunday" class="timelinebox ui-widget-header">
    <p> </p>
    </div>
    <div class="arrowbox"><img src="img/arrow.png" alt="arrow" class="arrow"/></div>
    </div>
</div>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>jQuery UI Droppable - Revert draggable position</title>
<link rel="stylesheet" href="jquery_ui/themes/base/jquery.ui.all.css">
<script src="jquery_ui/jquery-1.9.1.js"></script>
<script src="jquery_ui/ui/jquery.ui.core.js"></script>
<script src="jquery_ui/ui/jquery.ui.widget.js"></script>
<script src="jquery_ui/ui/jquery.ui.mouse.js"></script>
<script src="jquery_ui/ui/jquery.ui.draggable.js"></script>
<script src="jquery_ui/ui/jquery.ui.droppable.js"></script>
<link rel="stylesheet" href="jquery_ui/demos/demos.css">
<link rel="stylesheet" href="style.css">
<style>
#drag_monday, #drag_tuesday, #drag_wednesday, #drag_thursday, #drag_friday,
#drag_saturday, #drag_sunday { width: 100px; height: 100px; padding: 0.5em;  margin: 10px 10px 10px 0; }
#drop_monday, #drop_tuesday, #drop_wednesday, #drop_thursday, #drop_friday,
#drop_saturday, #drop_sunday{ width: 150px; height: 150px; padding: 0.5em; float: left; margin: 10px; }
</style>
<script>
$(function() {
    function randomize(divName)
    {
    var $container = $("#"+divName);
    
    $container.html(shuffle($container.children().get()));
    
    function shuffle(o){
        for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
        return o;
    };
    }

function init() {
    randomize("unsorted_days");
}

function reset() {
    window.location.reload();
    //randomize("unsorted_days");
    //reset_drag();
}
        init();



        $( "#drag_monday" ).draggable({ revert: "invalid"});
        $( "#drag_tuesday" ).draggable({ revert: "invalid" });
        $( "#drag_wednesday" ).draggable({ revert: "invalid" });
        $( "#drag_thursday" ).draggable({ revert: "invalid" });
        $( "#drag_friday" ).draggable({ revert: "invalid" });
        $( "#drag_saturday" ).draggable({ revert: "invalid" });
        $( "#drag_sunday" ).draggable({ revert: "invalid" });

        var correct_days = 0;

        // Store original position
        $(".ui-widget-content").data("left", $(".ui-widget-content").position().left).data("top", $(".ui-widget-content").position().top);

        /**
         * Put back all dragged element to their original position
         **/
        function reset_drag() 
        {
        $("#drag_monday").animate({"left": $("drag_monday").data("left"), 
            "top": $("#drag_monday").data("top")});
        $("#drag_tuesday").animate({"left": $("drag_tuesday").data("left"), 
                "top": $("#drag_tuesday").data("top")});
        $("#drag_wednesday").animate({"left": $("drag_wednesday").data("left"), 
                "top": $("#drag_wednesday").data("top")});
        $("#drag_thursday").animate({"left": $("drag_thursday").data("left"), 
                "top": $("#drag_thursday").data("top")});
        $("#drag_friday").animate({"left": $("drag_friday").data("left"), 
                "top": $("#drag_friday").data("top")});
        $("#drag_saturday").animate({"left": $("drag_saturday").data("left"), 
                "top": $("#drag_saturday").data("top")});
        $("#drag_sunday").animate({"left": $("drag_sunday").data("left"), 
                "top": $("#drag_sunday").data("top")});
        };


function drop_check(event, ui) {
    var dropId = $(this).attr("id");
    var dragId = ui.draggable.attr("id");
    if(++correct_days == 7) {
        alert("C'est gagn√©");
        correct_days = 0;
        reset();
    };

};

days = ["monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday"];
for(var i=0; i<days.length; i++) {
    console.log(days[i]);
    $("#unsorted_days").on( "click", "#drag_"+days[i], function() {
            console.log("click on "+this.id);
            var day = this.id.replace("drag_", "");
            document.getElementById("audio_"+day).play();
            });
}
 
$( "#drop_monday" ).droppable({
accept:"#drag_monday",
activeClass: "ui-state-hover",
hoverClass: "ui-state-active",
drop: drop_check
});
$( "#drop_tuesday" ).droppable({
accept:"#drag_tuesday",
activeClass: "ui-state-hover",
hoverClass: "ui-state-active",
drop: drop_check
});
$( "#drop_wednesday" ).droppable({
accept:"#drag_wednesday",
activeClass: "ui-state-hover",
hoverClass: "ui-state-active",
drop: drop_check
});
$( "#drop_thursday" ).droppable({
accept:"#drag_thursday",
activeClass: "ui-state-hover",
hoverClass: "ui-state-active",
drop: drop_check
});
$( "#drop_friday" ).droppable({
accept:"#drag_friday",
activeClass: "ui-state-hover",
hoverClass: "ui-state-active",
drop: drop_check
});
$( "#drop_saturday" ).droppable({
accept:"#drag_saturday",
activeClass: "ui-state-hover",
hoverClass: "ui-state-active",
drop: drop_check
});
$( "#drop_sunday" ).droppable({
accept:"#drag_sunday",
activeClass: "ui-state-hover",
hoverClass: "ui-state-active",
drop: drop_check
});
});
</script>
</head>
<body>

<div id="game">
<div id="unsorted_days">
<div id="drag_monday" class="ui-widget-content">
<p>Lundi</p>
<audio id="audio_monday" preload>
  <source src="sound/01-Lundi.ogg" type="audio/ogg">
  <source src="sound/01-Lundi.mp3" type="audio/mpeg">
  Your browser does not support the audio tag.
</audio>
</div>

<div id="drag_tuesday" class="ui-widget-content">
<p>Mardi</p>
<audio id="audio_tuesday" preload>
  <source src="sound/02-Mardi.ogg" type="audio/ogg">
  <source src="sound/02-Mardi.mp3" type="audio/mpeg">
  Your browser does not support the audio tag.
</audio>
</div>

<div id="drag_wednesday" class="ui-widget-content">
<p>Mercredi</p>
<audio id="audio_wednesday" preload>
  <source src="sound/03-Mercredi.ogg" type="audio/ogg">
  <source src="sound/03-Mercredi.mp3" type="audio/mpeg">
  Your browser does not support the audio tag.
</audio>
</div>

<div id="drag_thursday" class="ui-widget-content">
<p>Jeudi</p>
<audio id="audio_thursday" preload>
  <source src="sound/04-Jeudi.ogg" type="audio/ogg">
  <source src="sound/04-Jeudi.mp3" type="audio/mpeg">
  Your browser does not support the audio tag.
</audio>
</div>

<div id="drag_friday" class="ui-widget-content">
<p>Vendredi</p>
<audio id="audio_friday" preload>
  <source src="sound/05-Vendredi.ogg" type="audio/ogg">
  <source src="sound/05-Vendredi.mp3" type="audio/mpeg">
  Your browser does not support the audio tag.
</audio>
</div>

<div id="drag_saturday" class="ui-widget-content">
<p>Samedi</p>
<audio id="audio_saturday" preload>
  <source src="sound/06-Samedi.ogg" type="audio/ogg">
  <source src="sound/06-Samedi.mp3" type="audio/mpeg">
  Your browser does not support the audio tag.
</audio>
</div>

<div id="drag_sunday" class="ui-widget-content">
<p>Dimanche</p>
<audio id="audio_sunday" preload>
  <source src="sound/07-Dimanche.ogg" type="audio/ogg">
  <source src="sound/07-Dimanche.mp3" type="audio/mpeg">
  Your browser does not support the audio tag.
</audio>
</div>
</div>

<div id="sorted_days">
<div id="drop_monday" class="ui-widget-header">
<p>Drop Monday here</p>
</div>

<div id="drop_tuesday" class="ui-widget-header">
<p>Drop Tuesday here</p>
</div>

<div id="drop_wednesday" class="ui-widget-header">
<p>Drop Wednesday here</p>
</div>

<div id="drop_thursday" class="ui-widget-header">
<p>Drop Thursday here</p>
</div>

<div id="drop_friday" class="ui-widget-header">
<p>Drop Firday here</p>
</div>

<div id="drop_saturday" class="ui-widget-header">
<p>Drop Saturday here</p>
</div>

<div id="drop_sunday" class="ui-widget-header">
<p>Drop Sunday here</p>
</div>
</div>
</div>
</body>
</html>
